{% extends 'base/base_dashboard.html.twig' %}

{% block title %}{{ 'invoice.index_title'|trans }}{% endblock %}




{% set statusColors = {
    'Payée': 'bg-green-100 text-green-800',
    'Non payée': 'bg-red-100 text-red-800',
    'En attente': 'bg-yellow-100 text-yellow-800',
    'Annulée': 'bg-red-100 text-red-800'
} %}

{% block body %}

    <section class="flex flex-col gap-10">
        <header class="w-full flex justify-between">
            <h1 class="text-title font-title font-semibold">{{ 'invoice.title'|trans }}</h1>
            <twig:MenuItem href="{{ path('dashboard.invoice.export_all') }}" additionalClasses="hidden md:flex justify-center items-center gap-3 px-4 py-2 border border-primary rounded-small hover:bg-primary hover:text-white transition ease-in-out delay-75">
                <span class="text-xl">{{ ux_icon('tabler:cloud-download') }}</span>
                {{ 'crud.export_all'|trans }}
            </twig:MenuItem>
        </header>

        <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">
            <twig:KpiCard kpi_name="{{ 'invoice.invoice_paid'|trans }}" kpi_value="{{ statusCounts['paid'] }}" icon_name="la:file-invoice-dollar"></twig:KpiCard>
            <twig:KpiCard kpi_name="{{ 'invoice.invoice_unpaid'|trans }}" kpi_value="{{ statusCounts['unpaid'] }}" icon_name="la:file-invoice-dollar"></twig:KpiCard>
            <twig:KpiCard kpi_name="{{ 'invoice.invoice_pending'|trans }}" kpi_value="{{ statusCounts['pending'] }}" icon_name="la:file-invoice-dollar"></twig:KpiCard>
        </div>
        <div class="w-full">
            {{ component('Table', { invoices: invoices, headers: headers, rows: rows, title: 'invoice.table_title'|trans, actions: actions, paginatedData: invoices, statusColors: statusColors, deleteFormTemplate: null, deleteRoute: null}) }}
        </div>
    </section>

{% endblock %}