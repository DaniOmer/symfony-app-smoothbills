{# templates/site/login/index.html.twig #}

{% extends 'base/base_site.html.twig' %}
{% set inputClasses = "mb-2 py-2 block w-full border border-tertiary/50 focus:border-primary focus:ring-primary rounded-sm" %}

{% block title %}Validation de devis{% endblock %}

{% block body %}
<div class="">
    <div class='lg:w-1/3 mx-auto pb-10 bg-[#FEF9F9] drop-shadow-md'>
        <h2 class='w-full bg-white font-semibold text-subtitle text-center py-[18px] shadow-sm mb-5'>Bonjour Omer,</h2>
        <div>
            <h3>Voici le détail de votre devis</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Nom du service</th>
                        <th>Prix HT</th>
                        <th>Prix TTC</th>
                        <th>Quantité</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {% for detail in quotationDetails %}
                        <tr>
                            <td>{{ detail.serviceName }}</td>
                            <td>{{ detail.priceWithoutTax }}€</td>
                            <td>{{ detail.priceWithTax }}€</td>
                            <td>{{ detail.quantity }}</td>
                            <td>{{ detail.date ? detail.date|date('Y-m-d H:i:s') : '' }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <p>{{ 'Total HT'|trans }}: {{ totalPriceWithoutTax }}€</p>
            <p>{{ 'Total TTC'|trans }}: {{ totalPriceWithTax }}€</p>
        </div>
        <div class='flex gap-4 items-center mt-10'>
            <form action="{{ path('site.home.quotation.validation', {'token': token}) }}" method="post">
                <input type="hidden" name="_csrf_token" value="{{ csrf_token('accepted_action') }}" >
                <input type="hidden" name="action" value="accept">

                <twig:Button bg="filled" rounded="sm" type="submit" additionalClasses='w-full rounded-small'>
                    Accepté
                </twig:Button>
            </form>

            <form action="{{ path('site.home.quotation.validation', {'token': token}) }}" method="post">
                <input type="hidden" name="_csrf_token" value="{{ csrf_token('rejected_action') }}" >
                <input type="hidden" name="action" value="reject">

                <button type="submit" class='px-4 py-2 border border-red-500 rounded-small hover:bg-red-500 hover:text-white transition delay-75 ease-in-out'>
                    Refusé
                </button>
            </form>
        </div>
    </div>
    <div class='w-fit mx-auto mt-10'>
        <span class='font-semiboled'>&copy; {{ "now"|date('Y') }} Smoothbill -</span>
        <a href={{ path('site.legal_notice')}} class='text-primary underline'>{{ 'login.legal_notice'|trans }}</a>
    </div>
</div>
{% endblock %}
